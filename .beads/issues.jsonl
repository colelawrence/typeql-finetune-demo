{"id":"bd-2zh","title":"typeql-agent: fine-tune + hosted demo app","status":"open","priority":2,"issue_type":"epic","created_at":"2026-02-18T15:47:03.114148Z","created_by":"cole","updated_at":"2026-02-18T15:47:03.114148Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["epic","workflow"]}
{"id":"bd-2zh.1","title":"system_prompt.txt: write TypeQL agent system prompt","description":"Context:\n- Single source of truth for both training JSONL (assistant messages) and Worker inference call\n- Must describe JSON output format: {schema, queries, explanation} matching response_format: json_schema\n- Drift between training and inference prompt degrades quality significantly\n\nScope boundaries:\n- ✅ IN scope: finetune/system_prompt.txt content only\n- ✅ IN scope: TypeQL 3.0 idioms, schema design philosophy, JSON output format contract\n- ❌ OUT of scope: bundling into Worker (that is build tooling, separate bead)\n- ❌ OUT of scope: prompt_lock.json (written by bead 03)\n\nDone means:\n- finetune/system_prompt.txt exists and clearly describes: TypeQL 3.0 idioms, JSON output schema, schema design philosophy (relations > properties, @key for identifiers)\n- Output format section specifies: schema = TypeQL define block string, queries = array of strings, explanation = prose string\n- Prompt is readable by a developer unfamiliar with this project\n\nVerification:\n- Manual: read system_prompt.txt end-to-end; confirm it would produce correct output if you were the model","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T15:47:08.175656Z","created_by":"cole","updated_at":"2026-02-18T17:24:46.622348Z","closed_at":"2026-02-18T17:24:46.622146Z","close_reason":"finetune/system_prompt.txt written: TypeQL 3.0 idioms, JSON output format, schema design philosophy, variable scoping, Cypher mapping","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2zh.1","depends_on_id":"bd-2zh","type":"parent-child","created_at":"2026-02-18T17:21:59Z","created_by":"import","metadata":"{}","thread_id":""}],"comments":[{"id":1,"issue_id":"bd-2zh.1","author":"Cole Lawrence","text":"System prompt covers TypeQL 3.0 idioms, JSON output contract {schema, queries, explanation}, and schema design philosophy","created_at":"2026-02-18T17:24:43Z"}]}
{"id":"bd-2zh.10","title":"launch: README, rate-limit confirm, OpenAI cap, Discord post","description":"Context:\n- Final polish before posting publicly; all quality gates should already be green\n- OpenAI spending cap must be set before public launch (fine-tuned model inference is ~2-8x base rate)\n\nScope boundaries:\n- ✅ IN scope: README.md with setup instructions + demo GIF or screenshot\n- ✅ IN scope: confirm rate limit active (curl test)\n- ✅ IN scope: OpenAI account hard spending cap set\n- ✅ IN scope: post URL to TypeDB Discord\n- ❌ OUT of scope: any code changes (if a code change is needed, that is a new bead)\n\nDone means:\n- README.md exists with: project description, live URL, how to run the data pipeline locally\n- Rate limit verified: 11th request in 60s to same IP returns HTTP 429\n- OpenAI monthly spending cap set in dashboard\n- Link posted to TypeDB Discord\n\nVerification:\n- curl https://<pages>.pages.dev  # HTTP 200\n- for i in $(seq 1 11); do curl -s -o /dev/null -w '%{http_code}\\n' -X POST https://<worker>.workers.dev/generate -H 'Content-Type: application/json' -d '{\"prompt\":\"test\"}'; done  # last line should be 429\n- cat README.md | head -20  # confirm live URL present","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-18T15:47:13.422736Z","created_by":"cole","updated_at":"2026-02-18T15:49:20.994685Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2zh.10","depends_on_id":"bd-2zh","type":"parent-child","created_at":"2026-02-18T17:21:59Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-2zh.10","depends_on_id":"bd-2zh.8","type":"blocks","created_at":"2026-02-18T17:21:59Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-2zh.10","depends_on_id":"bd-2zh.9","type":"blocks","created_at":"2026-02-18T17:21:59Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-2zh.2","title":"01: generate schema NL descriptions (GPT-4o)","description":"Context:\n- Training data needs 9 NL descriptions per domain to reduce phrasing overfitting\n- Read from neo4j_schema.json (not schema.tql) to use property-graph vocabulary (FOLLOWS, RETWEETS_OF) — closer to how developers describe domains, avoids TypeQL vocabulary bias\n- Output cached to finetune/data/schema_descriptions.json (never re-runs if file exists)\n\nScope boundaries:\n- ✅ IN scope: finetune/01_generate_schema_descriptions.py\n- ✅ IN scope: reads text2typeql/dataset/*/neo4j_schema.json for all 15 domains\n- ✅ IN scope: calls GPT-4o, requests 9 variants per domain (imperative, noun-phrase, brief, verbose, technical, casual), validates JSON array output\n- ✅ IN scope: writes finetune/data/schema_descriptions.json\n- ❌ OUT of scope: JSONL construction (bead 03)\n- ❌ OUT of scope: descriptions must NOT use entity/relation names from the TypeQL schema\n\nDone means:\n- finetune/data/schema_descriptions.json exists with 15 domains × 9 descriptions = 135 total\n- Each description reads like something a developer would type, not a schema spec\n- Script is idempotent (skips if output file exists)\n\nVerification:\n- python finetune/01_generate_schema_descriptions.py --dry-run (if implemented) OR run on 1 domain and inspect output\n- python -c \"import json; d=json.load(open('finetune/data/schema_descriptions.json')); assert all(len(v)==9 for v in d.values()), 'wrong count'; print(len(d), 'domains OK')\"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T15:47:08.196442Z","created_by":"cole","updated_at":"2026-02-18T17:28:30.887737Z","closed_at":"2026-02-18T17:28:30.887714Z","close_reason":"01_generate_schema_descriptions.py written and dry-run verified; generates 15x9=135 schema descriptions","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2zh.2","depends_on_id":"bd-2zh","type":"parent-child","created_at":"2026-02-18T17:21:59Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-2zh.2","depends_on_id":"bd-2zh.1","type":"blocks","created_at":"2026-02-18T17:21:59Z","created_by":"import","metadata":"{}","thread_id":""}],"comments":[{"id":2,"issue_id":"bd-2zh.2","author":"Cole Lawrence","text":"Script generates 9 NL descriptions per domain using GPT-4o, reads neo4j_schema.json; dry-run verified all 15 domains discovered","created_at":"2026-02-18T17:28:30Z"}]}
{"id":"bd-2zh.3","title":"02: build training JSONL (schema + query + combined examples)","description":"Context:\n- Produces the training/val/test JSONL splits consumed by bead 05 (upload)\n- All assistant content is JSON strings matching response_format: json_schema invariant\n- source column in all_queries.csv determines which schema version to inject (synthetic-1 vs synthetic-2); never cross-inject\n- Round-robin interleave: 1 schema example per ~100 query examples (prevents clustering)\n- northwind withheld entirely as test set; 80/20 train/val split on remainder\n\nScope boundaries:\n- ✅ IN scope: finetune/02_build_training_jsonl.py\n- ✅ IN scope: reads text2typeql/dataset/all_queries.csv, schema_descriptions.json, schema.tql files\n- ✅ IN scope: writes finetune/data/train.jsonl, val.jsonl, test.jsonl\n- ✅ IN scope: writes finetune/data/.build-manifest (SHA256 of system_prompt.txt at build time)\n- ✅ IN scope: post-build validation: JSON.parse every assistant content field, assert schema/queries/explanation present\n- ❌ OUT of scope: combined + mutation examples (bead 02b adds those)\n- ❌ OUT of scope: upload (bead 05)\n\nDone means:\n- train.jsonl ~11,331 lines, val.jsonl ~2,833 lines, test.jsonl ~807 lines (northwind)\n- Every assistant content field is valid JSON with schema/queries/explanation keys\n- .build-manifest written with SHA256 of system_prompt.txt\n- Validation pass prints 0 errors\n\nVerification:\n- python finetune/02_build_training_jsonl.py\n- python -c \"import json; rows=[json.loads(l) for l in open('finetune/data/train.jsonl')]; asst=[json.loads(r['messages'][-1]['content']) for r in rows]; bad=[a for a in asst if 'schema' not in a or 'queries' not in a]; print(len(bad),'bad rows (expect 0)')\"\n- wc -l finetune/data/train.jsonl finetune/data/val.jsonl finetune/data/test.jsonl","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T15:47:08.480884Z","created_by":"cole","updated_at":"2026-02-18T17:34:47.756048Z","closed_at":"2026-02-18T17:34:47.756011Z","close_reason":"02_build_training_jsonl.py written and verified; produces train/val/test JSONL with correct source-schema mapping","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2zh.3","depends_on_id":"bd-2zh","type":"parent-child","created_at":"2026-02-18T17:21:59Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-2zh.3","depends_on_id":"bd-2zh.2","type":"blocks","created_at":"2026-02-18T17:21:59Z","created_by":"import","metadata":"{}","thread_id":""}],"comments":[{"id":4,"issue_id":"bd-2zh.3","author":"Cole Lawrence","text":"Script builds train/val/test JSONL; validated 13,939 total (10506/2626/807), 0 errors. Schema+mutation examples will merge when available.","created_at":"2026-02-18T17:34:47Z"}]}
{"id":"bd-2zh.4","title":"02b: generate schema-mutation training examples","description":"Context:\n- Task B at inference uses the model's own Task A schema output — mutation examples are the only way to train robustness to self-generated schema variation\n- 3 examples per domain × 15 domains = 45 additional combined examples appended to train.jsonl\n- Must validate mutated queries parse against the mutated schema using typedb-driver\n\nScope boundaries:\n- ✅ IN scope: finetune/02b_generate_mutation_queries.py\n- ✅ IN scope: per domain: GPT-4o generates a mutated schema (swap 1 role name, add 1 entity), then 5 TypeQL queries against that mutated schema\n- ✅ IN scope: typedb-driver structural validation of generated queries\n- ✅ IN scope: outputs 3 valid combined examples per domain as JSONL lines (JSON format, same schema as bead 03)\n- ❌ OUT of scope: appending to train.jsonl (bead 03 or 05 handles merge); script outputs a separate mutation_examples.jsonl\n- ❌ OUT of scope: more than 3 validated examples per domain (stop at first 3 that pass validation)\n\nDone means:\n- finetune/data/mutation_examples.jsonl has 45 lines (3 × 15 domains)\n- Every line passes JSON.parse + schema/queries/explanation assertion\n- Every query in each row was structurally validated against the mutated schema\n\nVerification:\n- docker run -d -p 1729:1729 vaticle/typedb:3.3.0  (must be running)\n- python finetune/02b_generate_mutation_queries.py\n- wc -l finetune/data/mutation_examples.jsonl  # expect 45\n- python -c \"import json; rows=[json.loads(l) for l in open('finetune/data/mutation_examples.jsonl')]; assert len(rows)==45; bad=[r for r in rows if not json.loads(r['messages'][-1]['content']).get('queries')]; print(len(bad),'rows with empty queries (expect 0)')\"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T15:47:08.492863Z","created_by":"cole","updated_at":"2026-02-18T17:28:30.956562Z","closed_at":"2026-02-18T17:28:30.956540Z","close_reason":"02b_generate_mutation_queries.py written; generates 45 mutation training examples across 15 domains","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2zh.4","depends_on_id":"bd-2zh","type":"parent-child","created_at":"2026-02-18T17:21:59Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-2zh.4","depends_on_id":"bd-2zh.1","type":"blocks","created_at":"2026-02-18T17:21:59Z","created_by":"import","metadata":"{}","thread_id":""}],"comments":[{"id":3,"issue_id":"bd-2zh.4","author":"Cole Lawrence","text":"Script generates mutated schema + queries per domain, validates with typedb-driver, outputs 3 valid examples per domain","created_at":"2026-02-18T17:28:30Z"}]}
{"id":"bd-2zh.5","title":"03: upload JSONL + poll OpenAI fine-tune job (Bun)","description":"Context:\n- Uploads merged JSONL (train.jsonl + mutation_examples.jsonl) to OpenAI and polls until the fine-tune job completes\n- Implements the canonical upload→poll(processed)→create job→poll(validating_files|queued|running) pattern from .references/openai-fine-tuning/fine-tuning.ts\n- Uses Bun.file() upload pattern (not fs.createReadStream) — see .references/openai-fine-tuning/fine-tune-studio--upload-route.ts\n- Writes prompt_lock.json on success (fine-tune job ID + system prompt SHA256)\n\nScope boundaries:\n- ✅ IN scope: finetune/03_upload_and_train.ts (Bun script)\n- ✅ IN scope: verify .build-manifest SHA256 matches current system_prompt.txt before upload (fail fast if mismatch)\n- ✅ IN scope: merge train.jsonl + mutation_examples.jsonl + val.jsonl into upload files\n- ✅ IN scope: poll until succeeded/failed/cancelled; print status every 30s\n- ✅ IN scope: on success: write finetune/data/prompt_lock.json\n- ❌ OUT of scope: JSONL validation (done in bead 03)\n- ❌ OUT of scope: eval (bead 06)\n\nDone means:\n- Fine-tuned model ID in hand (printed to stdout, stored in prompt_lock.json)\n- prompt_lock.json contains: { model_id, job_id, prompt_sha256, created_at }\n- Script exits non-zero on any failure (file mismatch, API error, job failure)\n\nVerification:\n- bun finetune/03_upload_and_train.ts --dry-run (validate files, skip actual upload)\n- After real run: cat finetune/data/prompt_lock.json | jq .model_id  # expect 'ft:gpt-4o-mini...'\n- openai api fine_tuning.jobs.retrieve <job_id>  # confirm status: succeeded","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T15:47:08.500969Z","created_by":"cole","updated_at":"2026-02-18T17:39:22.044176Z","closed_at":"2026-02-18T17:39:22.043990Z","close_reason":"03_upload_and_train.ts written and dry-run verified; uploads JSONL, polls fine-tune job, writes prompt_lock.json","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2zh.5","depends_on_id":"bd-2zh","type":"parent-child","created_at":"2026-02-18T17:21:59Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-2zh.5","depends_on_id":"bd-2zh.3","type":"blocks","created_at":"2026-02-18T17:21:59Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-2zh.5","depends_on_id":"bd-2zh.4","type":"blocks","created_at":"2026-02-18T17:21:59Z","created_by":"import","metadata":"{}","thread_id":""}],"comments":[{"id":5,"issue_id":"bd-2zh.5","author":"Cole Lawrence","text":"Bun script: upload JSONL, create fine-tune job, poll until done, write prompt_lock.json; dry-run verified","created_at":"2026-02-18T17:39:22Z"}]}
{"id":"bd-2zh.6","title":"eval: northwind structural validity (typedb-driver, RAG-disabled)","description":"Context:\n- Quality gate before any Cloudflare deployment: structural validity ≥90% on northwind test set\n- Must be RAG-disabled (no Vectorize retrieval, no few-shot examples) to isolate fine-tune quality from retrieval quality\n- Requires TypeDB running locally and typedb-driver installed\n\nScope boundaries:\n- ✅ IN scope: finetune/eval/syntax_check.py\n- ✅ IN scope: finetune/eval/README.md (Docker command + driver install)\n- ✅ IN scope: finetune/eval/novel_domain_prompts.txt (20 fixed prompts, ≥3 outside training domains)\n- ✅ IN scope: call fine-tuned model directly (no RAG), parse each response JSON, validate query strings against northwind schema using typedb-driver\n- ✅ IN scope: print pass rate; exit non-zero if <90%\n- ❌ OUT of scope: RAG eval (that is Phase 3 manual testing)\n- ❌ OUT of scope: the Worker or any Cloudflare infrastructure\n\nDone means:\n- syntax_check.py runs to completion on northwind test.jsonl\n- Structural validity ≥90% printed and confirmed\n- novel_domain_prompts.txt has 20 prompts, at least 3 clearly outside the 15 training domains\n\nVerification:\n- docker run -d -p 1729:1729 vaticle/typedb:3.3.0\n- pip install typedb-driver\n- python finetune/eval/syntax_check.py --model $(cat finetune/data/prompt_lock.json | jq -r .model_id) --test finetune/data/test.jsonl\n- Expected output: 'Structural validity: XX.X% (≥90% required)' with exit 0","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T15:47:13.390758Z","created_by":"cole","updated_at":"2026-02-18T17:43:35.097881Z","closed_at":"2026-02-18T17:43:35.097703Z","close_reason":"Eval scripts written: syntax_check.py validates structural validity via TypeDB, 20 novel domain prompts, README with setup instructions","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2zh.6","depends_on_id":"bd-2zh","type":"parent-child","created_at":"2026-02-18T17:21:59Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-2zh.6","depends_on_id":"bd-2zh.5","type":"blocks","created_at":"2026-02-18T17:21:59Z","created_by":"import","metadata":"{}","thread_id":""}],"comments":[{"id":6,"issue_id":"bd-2zh.6","author":"Cole Lawrence","text":"Eval scripts: syntax_check.py with TypeDB validation, README.md, 20 novel prompts (6 OOD)","created_at":"2026-02-18T17:43:35Z"}]}
{"id":"bd-2zh.7","title":"cf: provision Vectorize indexes + deploy Worker /generate","description":"Context:\n- First Cloudflare deployment; Workers Paid plan required before any Vectorize commands\n- Worker implements the single code path: embed → parallel Vectorize queries → build prompt → call fine-tuned model (response_format: json_schema, stream: false) → assert all three fields → return application/json\n- No streaming, no KV, no domain resolution — one path, fail loudly on any missing field\n- Build tooling: check-prompt-lock.ts → bundle-prompt.ts must run before deploy\n\nScope boundaries:\n- ✅ IN scope: worker/ directory — wrangler.toml, src/index.ts, scripts/bundle-prompt.ts, scripts/check-prompt-lock.ts, src/generated/system-prompt.ts\n- ✅ IN scope: /generate endpoint and /health endpoint per §7 spec\n- ✅ IN scope: AbortController 25s deadline wrapping OpenAI fetch\n- ✅ IN scope: max_completion_tokens: 1200, response_format: json_schema\n- ✅ IN scope: Cloudflare rate limit rule: 10 req/min per IP (wrangler.toml)\n- ❌ OUT of scope: Vectorize retrieval (wired in bead 08)\n- ❌ OUT of scope: UI (bead 09)\n\nDone means:\n- Worker deployed and reachable at workers.dev URL\n- curl POST /generate with a prompt returns { schema, queries, explanation } JSON within 30s\n- curl GET /health returns { ok: true }\n- Prompt hash check fails deploy if system_prompt.txt differs from prompt_lock.json\n\nVerification:\n- bun run worker/scripts/check-prompt-lock.ts  # expect exit 0\n- wrangler deploy (from worker/ dir)\n- curl -X POST https://<worker>.workers.dev/generate -H 'Content-Type: application/json' -d '{\"prompt\":\"model a blog\"}' | jq '{schema: .schema[:50], queries_count: (.queries|length)}'\n- curl https://<worker>.workers.dev/health","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-18T15:47:13.399304Z","created_by":"cole","updated_at":"2026-02-18T17:45:45.771957Z","closed_at":"2026-02-18T17:45:45.771755Z","close_reason":"Worker scaffolding complete with /generate, /health, build tooling, 25s timeout, JSON schema response format","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2zh.7","depends_on_id":"bd-2zh","type":"parent-child","created_at":"2026-02-18T17:21:59Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-2zh.7","depends_on_id":"bd-2zh.6","type":"blocks","created_at":"2026-02-18T17:21:59Z","created_by":"import","metadata":"{}","thread_id":""}],"comments":[{"id":7,"issue_id":"bd-2zh.7","author":"Cole Lawrence","text":"Worker scaffolding: /generate + /health, bundle-prompt, check-prompt-lock, wrangler.toml","created_at":"2026-02-18T17:45:45Z"}]}
{"id":"bd-2zh.8","title":"rag: populate typeql-examples + typeql-docs Vectorize indexes","description":"Context:\n- Populates both Vectorize indexes that the Worker queries in parallel on every request\n- typeql-examples: question-only embeddings (not question+typeql) — symmetric with user prompt at inference\n- typeql-docs: TypeQL 3.0 reference doc chunks (~500 tokens, 50-token overlap), pinned commit hash stored in docs_version.txt\n\nScope boundaries:\n- ✅ IN scope: finetune/04_build_vector_index.py — embeds all 13,939 questions (text-embedding-3-small, 512 dims), upserts to typeql-examples\n- ✅ IN scope: finetune/05_chunk_docs.py — clones typedb-docs at pinned tag, chunks markdown, upserts to typeql-docs; writes data/docs_version.txt\n- ❌ OUT of scope: modifying the Worker code (RAG retrieval is already in the Worker from bead 07)\n\nDone means:\n- typeql-examples Vectorize index has 13,939 vectors\n- typeql-docs Vectorize index has vectors (count depends on doc size, record actual count)\n- data/docs_version.txt has the pinned typedb-docs commit hash\n- curl POST /generate now returns TypeQL influenced by retrieved examples (spot-check: prompt similar to a training example should produce recognizable output)\n\nVerification:\n- python finetune/04_build_vector_index.py  # prints 'Upserted 13939 vectors'\n- python finetune/05_chunk_docs.py  # prints chunk count + commit hash\n- wrangler vectorize get typeql-examples  # confirm vectorCount: 13939\n- Manual: curl POST /generate with 'which users follow Neo4j?' — response queries should reference twitter-schema entities if RAG retrieved similar training examples","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-18T15:47:13.407142Z","created_by":"cole","updated_at":"2026-02-18T15:48:56.908642Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2zh.8","depends_on_id":"bd-2zh","type":"parent-child","created_at":"2026-02-18T17:21:59Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-2zh.8","depends_on_id":"bd-2zh.7","type":"blocks","created_at":"2026-02-18T17:21:59Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-2zh.9","title":"ui: single-page HTML demo app (Cloudflare Pages)","description":"Context:\n- Single HTML file deployed to Cloudflare Pages; no framework, no build step\n- Fetch → response.json() → render all three panels simultaneously (no streaming)\n- CodeMirror with a custom TypeQL keyword-list language mode for syntax highlighting\n\nScope boundaries:\n- ✅ IN scope: ui/index.html (single file, all CSS + JS inline or via CDN)\n- ✅ IN scope: three-panel layout: CSS grid 25fr 50fr 25fr (Schema | Queries | Explanation), stacks below 768px\n- ✅ IN scope: loading skeleton on submit, renders all panels on response.json() resolved\n- ✅ IN scope: error banner on non-200 (429 shows specific message), empty-output fallback\n- ✅ IN scope: copy-to-clipboard buttons, [?] docs link to TypeQL 3.x reference\n- ✅ IN scope: CodeMirror keyword-list mode for: match fetch reduce define insert delete isa has owns relates\n- ✅ IN scope: deploy to Cloudflare Pages (wrangler pages deploy ui/)\n- ❌ OUT of scope: any backend changes\n- ❌ OUT of scope: auth, accounts, analytics\n\nDone means:\n- Page loads at pages.dev URL\n- Submit with 'model a blog' → loading skeleton → all 3 panels populated within 15s\n- 375px mobile layout: panels stack vertically, no horizontal scroll\n- 1280px laptop: three-column layout\n- Error states render (simulate 429 and 500)\n- Copy buttons copy TypeQL to clipboard\n\nVerification:\n- wrangler pages deploy ui/\n- Manual at 375px (DevTools): submit prompt, verify stacked layout + all panels fill\n- Manual at 1280px: three-column layout renders correctly\n- Manual: paste 'find all users who follow someone who liked a tweet about TypeDB' → panels populate\n- Manual: copy button in Queries panel → paste into terminal — valid TypeQL syntax","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-18T15:47:13.414409Z","created_by":"cole","updated_at":"2026-02-18T15:49:10.627933Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2zh.9","depends_on_id":"bd-2zh","type":"parent-child","created_at":"2026-02-18T17:21:59Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-2zh.9","depends_on_id":"bd-2zh.7","type":"blocks","created_at":"2026-02-18T17:21:59Z","created_by":"import","metadata":"{}","thread_id":""}]}
